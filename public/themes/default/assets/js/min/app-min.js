document_title=document.title,$(function(){function e(){$(".text-wrapper").each(function(){$(this).html($(this).html().replace(/#([a-zA-Z0-9]+)/g,'<a class="hashtag" href="'+SP_source()+'?hashtag=$1">#$1</a>'))})}function t(){$(".text-wrapper").each(function(){$(this).html($(this).html().replace(/@([a-zA-Z0-9]+)/g,'<a class="hashtag" href="'+SP_source()+'$1">@$1</a>'))})}function s(){var e=tizeUsers[0].selectize,t=e.getValue(),s=t.split(","),a="";$.each(s,function(t,s){a=a+'<a href="#">'+e.options[s].name+"</a>, "}),$(".user-tags-added").find(".user-tag-names").html(a)}function a(e,t,s){var a=noty({text:e,layout:"bottomLeft",type:"success",theme:"relax",timeout:1,animation:{open:"animated fadeIn",close:"animated fadeOut",easing:"swing",speed:500}})}$("#link_other a").attr("target","_blank"),$(".show-users-modal").on("click",function(e){e.preventDefault(),$.post(SP_source()+"ajax/get-users-modal",{user_ids:$(this).data("users"),heading:$(this).data("heading")},function(e){200==e.status&&$(".modal-content").html(e.responseHtml)}),$("#usersModal").modal("show")}),$(".edit-post").on("click",function(e){e.preventDefault(),$.post(SP_source()+"ajax/edit-post",{post_id:$(this).data("post-id")},function(e){200==e.status&&$(".modal-content").html(e.data)}),$("#usersModal").modal("show"),setTimeout(function(){jQuery("time.timeago").timeago()},100)}),$("body").on("click",".btn-delete-user",function(){confirm("are you sure to delete?")&&(window.location=base_url+current_username+"/settings/deleteme")}),emojify.setConfig({img_dir:theme_url+"images/emoji/basic"}),$("#flash-overlay-modal").modal(),$("#example").DataTable(),$("#datepick2").datepicker(),jQuery("time.timeago").timeago(),$(".create-post-form").ajaxForm({url:SP_source()+"ajax/create-post",beforeSubmit:function i(e,t,s){var a=t[0];return $(".post-images-upload").val()||a.description.value||a.youtube_video_id.value||a.location.value||a.soundcloud_id.value?void 0:(swal("Your post cannot be empty!"),!1)},beforeSend:function(){create_post_form=$(".create-post-form"),create_post_button=create_post_form.find(".btn-submit"),create_post_button.attr("disabled",!0).append(' <i class="fa fa-spinner fa-pulse "></i>'),create_post_form.find(".post-message").fadeOut("fast")},success:function(s){create_post_button.attr("disabled",!1).find(".fa-spinner").addClass("hidden"),200==s.status?($(".timeline-posts").prepend(s.data.original),jQuery("time.timeago").timeago(),$(".no-posts").hide(),$(".video-addon").hide(),$(".music-addon").hide(),$(".emoticons-wrapper").hide(),$(".user-tags-addon").hide(),$(".user-tags-added").hide(),$(".user-results").hide(),create_post_form.find("input[type=text], textarea, input[type=file]").val(""),create_post_form.find(".youtube-iframe").empty(),create_post_form.find("#post-image-holder").empty(),create_post_form.find(".post-images-selected").hide(),$('[name="youtube_video_id"]').val(),$('[name="youtube_title"]').val(),$('[name="soundcloud_id"]').val(),$('[name="soundcloud_title"]').val(),$('[name="user_tags[]"]').val(),$(".user-tags").val(),$(".user-tag-names").empty(""),emojify.run(),e(),t(),$('[name="description"]').focus(),a("Your post has been successfully published")):($(".login-errors").html(s.message),console.log(s.message))}}),$("#videoUpload").on("click",function(e){e.preventDefault(),$(".video-addon").slideToggle(),"block"===$(".music-addon").css("display")&&$(".music-addon").slideUp(300)}),$("#addUserTags").on("click",function(e){e.preventDefault(),$(".user-tags-addon").slideToggle(),$(".user-tags-added").slideToggle()}),$("#musicUpload").on("click",function(e){e.preventDefault(),$(".music-addon").slideToggle(),"block"===$(".video-addon").css("display")&&$(".video-addon").slideUp(300)}),$("#locationUpload").on("click",function(e){e.preventDefault(),$(".location-addon").slideToggle()}),$("#emoticons").on("click",function(e){e.preventDefault(),emojify.run(),$(".emoticons-wrapper").slideToggle()}),$("#youtubeText").on("keyup",function(){var e=$(this).closest(".video-addon");e.find(".fa-film").addClass("fa-spinner fa-spin"),$(this).closest(".video-addon").find(".fa-film").addClass("fa-spinner fa-spin"),$.post(SP_source()+"ajax/get-youtube-video",{youtube_source:$("#youtubeText").val(),csrf_token:$('[name="csrf_token"]').attr("content")}).done(function(t){200==t.status&&($(".youtube-iframe").html(t.message.iframe),$('[name="youtube_video_id"]').val(t.message.id),$('[name="youtube_title"]').val(t.message.title),e.find(".fa-film").removeClass("fa-spinner fa-spin"))})}),$("#soundCloudText").on("keyup",function(){var e=$(this).closest(".music-addon");$(".soundcloud-results").length?($(".soundcloud-results").show(),e.find(".fa-music").addClass("fa-spinner fa-spin"),$(this).closest(".music-addon").find(".fa-music").addClass("fa-spinner fa-spin")):$(".soundcloud-results-wrapper").html('<div class="list-group soundcloud-results"></div>'),$.post(SP_source()+"ajax/get-soundcloud-results",{q:$("#soundCloudText").val(),csrf_token:$('[name="csrf_token"]').attr("content")}).done(function(t){if(200==t.status){e.find(".fa-music").removeClass("fa-spinner fa-spin"),$(".soundcloud-results").html("");var s=jQuery.parseJSON(t.data);$.each(s,function(e,t){$(".soundcloud-results").append('<a class="list-group-item soundcloud-result-item" data-soundcloud-id="'+t.id+'" data-soundcloud-title="'+t.title+'" href="#"> <img src="'+t.artwork_url+'"> '+t.title+"</a>")})}})}),$(document).on("click",".soundcloud-result-item",function(e){e.preventDefault(),$("#soundCloudText").val($(this).data("soundcloud-title")),$(".soundcloud-results").slideToggle(),$('[name="soundcloud_id"]').val($(this).data("soundcloud-id")),$('[name="soundcloud_title"]').val($(this).data("soundcloud-title"))}),$(document).on("click",".user-result-item",function(e){e.preventDefault(),$(".user-tags-added").append('<input type="hidden" value="'+$(this).data("user-id")+'" name="user_tags[]" >');var t=$("input[name='user_tags[]']").map(function(){return $(this).val()}).get();t.length<=1?$(".user-tags-added").find(".user-tag-names").append('<a href="#">'+$(this).data("user-name")+"</a>"):$(".user-tags-added").find(".user-tag-names").append(', <a href="#">'+$(this).data("user-name")+"</a>")}),$(document).on("click",".like-post",function(e){e.preventDefault(),like_btn=$(this).closest(".panel-post"),postId=$(this).data("post-id"),$.post(SP_source()+"ajax/like-post",{post_id:$(this).data("post-id")},function(e){console.log(e.status),200==e.status&&(1==e.liked?(like_btn.find(".like-"+postId).parent().addClass("hidden"),like_btn.find(".unlike-"+postId).parent().removeClass("hidden"),like_btn.find(".notify").parent().addClass("hidden"),like_btn.find(".unnotify").parent().removeClass("hidden"),$(".footer-list").find(".like1-"+postId).parent().remove(),$(".like2-"+postId).empty(),$(".footer-list").find(".like2-"+postId).removeClass("hidden").append('<a href="#" class=".show-likes">'+e.likecount+'<i class="fa fa-thumbs-up"></i></a>')):(like_btn.find(".like-"+postId).parent().removeClass("hidden"),like_btn.find(".unlike-"+postId).parent().addClass("hidden"),like_btn.find(".notify").parent().removeClass("hidden"),like_btn.find(".unnotify").parent().addClass("hidden"),$(".footer-list").find(".like1-"+postId).parent().remove(),$(".like2-"+postId).empty(),$(".footer-list").find(".like2-"+postId).removeClass("hidden").append('<a href="#" class=".show-likes">'+e.likecount+'<i class="fa fa-thumbs-up"></i></a>')))})}),$(".join-user").on("click",function(e){e.preventDefault(),join_btn=$(this).closest(".join-links"),$.post(SP_source()+"ajax/join-group",{timeline_id:$(this).data("timeline-id")},function(e){200==e.status&&(1==e.joined?(join_btn.find(".join").parent().addClass("hidden"),join_btn.find(".joined").parent().removeClass("hidden")):(join_btn.find(".join").parent().removeClass("hidden"),join_btn.find(".joined").parent().addClass("hidden")))})}),$(".follow-user-confirm").on("click",function(e){e.preventDefault(),join_btn=$(this).closest(".follow-links"),input_ids=$(this).data("timeline-id").split("-"),timeline_id=input_ids[0],follow_status=input_ids[1],$.post(SP_source()+"ajax/follow-user-confirm",{timeline_id:timeline_id,follow_status:follow_status},function(e){200==e.status&&(1==e.followrequest?(join_btn.find(".follow").parent().addClass("hidden"),join_btn.find(".followrequest").parent().removeClass("hidden")):1==e.unfollow?(join_btn.find(".unfollow").parent().addClass("hidden"),join_btn.find(".follow").parent().removeClass("hidden")):(join_btn.find(".follow").parent().removeClass("hidden"),join_btn.find(".followrequest").parent().addClass("hidden")))})}),$(".join-close-group").on("click",function(e){e.preventDefault(),join_btn=$(this).closest(".join-links"),$.post(SP_source()+"ajax/join-close-group",{timeline_id:$(this).data("timeline-id")},function(e){200==e.status&&(1==e.joinrequest?(join_btn.find(".join").parent().addClass("hidden"),join_btn.find(".joinrequest").parent().removeClass("hidden")):1==e.join?(join_btn.find(".joined").parent().addClass("hidden"),join_btn.find(".join").parent().removeClass("hidden")):(join_btn.find(".join").parent().removeClass("hidden"),join_btn.find(".joinrequest").parent().addClass("hidden")))})}),$("body").on("click",".follow-user",function(e){e.preventDefault(),follow_btn=$(this).closest(".follow-links"),$.post(SP_source()+"ajax/follow-post",{timeline_id:$(this).data("timeline-id")},function(e){200==e.status&&(1==e.followed?(follow_btn.find(".follow").parent().addClass("hidden"),follow_btn.find(".unfollow").parent().removeClass("hidden")):(follow_btn.find(".follow").parent().removeClass("hidden"),follow_btn.find(".unfollow").parent().addClass("hidden")))})}),$(".accept-user").on("click",function(e){e.preventDefault(),input_ids=$(this).data("user-id").split("-"),user_id=input_ids[0],group_id=input_ids[1],accept_btn=$(this).closest(".follow-links"),$.post(SP_source()+"ajax/join-accept",{user_id:user_id,group_id:group_id},function(e){200==e.status&&1==e.accepted&&accept_btn.find(".accept").closest(".holder").slideToggle()})}),$(".accept-follow").on("click",function(e){e.preventDefault(),accept_btn=$(this).closest(".follow-links"),$.post(SP_source()+"ajax/follow-accept",{user_id:$(this).data("user-id")},function(e){200==e.status&&1==e.accepted&&accept_btn.find(".accept").closest(".holder").slideToggle()})}),$(".reject-follow").on("click",function(e){e.preventDefault(),reject_btn=$(this).closest(".follow-links"),$.post(SP_source()+"ajax/follow-reject",{user_id:$(this).data("user-id")},function(e){200==e.status&&1==e.rejected&&reject_btn.find(".reject").closest(".holder").slideToggle()})}),$(document).on("click",".add-member",function(e){e.preventDefault(),input_ids=$(this).data("user-id").split("-"),user_id=input_ids[0],group_id=input_ids[1],user_status=input_ids[2],add_btn=$(this).closest(".follow-links"),$.post(SP_source()+"ajax/add-memberGroup",{user_id:user_id,group_id:group_id,user_status:user_status},function(e){200==e.status&&1==e.added&&add_btn.find(".add").closest(".holder").slideToggle()})}),$(document).on("click",".add-page-member",function(e){e.preventDefault(),input_ids=$(this).data("user-id").split("-"),user_id=input_ids[0],page_id=input_ids[1],user_status=input_ids[2],add_btn=$(this).closest(".follow-links"),$.post(SP_source()+"ajax/add-page-members",{user_id:user_id,page_id:page_id,user_status:user_status},function(e){200==e.status&&1==e.added&&add_btn.find(".add").closest(".holder").slideToggle()})}),$(".reject-user").on("click",function(e){e.preventDefault(),input_ids=$(this).data("user-id").split("-"),user_id=input_ids[0],group_id=input_ids[1],reject_btn=$(this).closest(".follow-links"),$.post(SP_source()+"ajax/join-reject",{user_id:user_id,group_id:group_id},function(e){200==e.status&&1==e.rejected&&reject_btn.find(".reject").closest(".holder").slideToggle()})}),$(".manage-report").on("click",function(e){e.preventDefault(),post_id=$(this).data("post-id"),report_btn=$(this).closest(".list-inline"),$.post(SP_source()+"ajax/report-post",{post_id:post_id},function(e){200==e.status&&1==e.reported&&($("#post"+post_id).slideToggle(),a("You have successfully reported the page"))})}),$(document).on("click",".smiley-post",function(e){e.preventDefault(),textbox=$("#createPost"),textbox.val(textbox.val()+" "+$(this).data("smiley-id")),textbox.focus()}),$(".page-like").on("click",function(e){e.preventDefault(),pagelike_btn=$(this).closest(".pagelike-links"),$.post(SP_source()+"ajax/page-like",{timeline_id:$(this).data("timeline-id")},function(e){200==e.status&&(1==e.liked?(pagelike_btn.find(".like").parent().addClass("hidden"),pagelike_btn.find(".liked").parent().removeClass("hidden")):(pagelike_btn.find(".like").parent().removeClass("hidden"),pagelike_btn.find(".liked").parent().addClass("hidden")))})}),$(".page-report").on("click",function(e){e.preventDefault(),pagereport_btn=$(this).closest(".pagelike-links"),$.post(SP_source()+"ajax/page-report",{timeline_id:$(this).data("timeline-id")},function(e){200==e.status&&(1==e.reported?(pagereport_btn.find(".report").parent().addClass("hidden"),pagereport_btn.find(".reported").parent().removeClass("hidden"),a("You have successfully reported the page")):(pagereport_btn.find(".report").parent().removeClass("hidden"),pagereport_btn.find(".reported").parent().addClass("hidden"),a("You have successfully unreported the page")))})}),$(document).on("click",".like-comment",function(e){e.preventDefault(),commentId=$(this).data("comment-id"),commentlike_btn=$(this).closest(".comments-list"),$.post(SP_source()+"ajax/comment-like",{comment_id:$(this).data("comment-id")},function(e){200==e.status&&(1==e.liked?(commentlike_btn.find(".like").parent().addClass("hidden"),commentlike_btn.find(".unlike").parent().removeClass("hidden"),$(".comments-list").find(".like3-"+commentId).parent().addClass("hidden"),$(".like4-"+commentId).empty(),$(".comments-list").find(".like4-"+commentId).removeClass("hidden").append('<a href="#" class=".show-likes">'+e.likecount+'<i class="fa fa-thumbs-up"></i></a>')):(commentlike_btn.find(".like").parent().removeClass("hidden"),commentlike_btn.find(".unlike").parent().addClass("hidden"),$(".comments-list").find(".like3-"+commentId).parent().addClass("hidden"),$(".like4-"+commentId).empty(),$(".comments-list").find(".like4-"+commentId).removeClass("hidden").append('<a href="#" class=".show-likes">'+e.likecount+'<i class="fa fa-thumbs-up"></i></a>')))})}),$(".share-post").on("click",function(e){e.preventDefault(),post_id=$(this).data("post-id"),sharepost_btn=$(this).closest(".list-inline"),$.post(SP_source()+"ajax/share-post",{post_id:post_id},function(e){200==e.status&&(1==e.shared?(sharepost_btn.find(".share").parent().addClass("hidden"),sharepost_btn.find(".shared").parent().removeClass("hidden"),$(".list-inline").find(".share1-"+post_id).parent().addClass("hidden"),$(".share2-"+post_id).empty(),$(".list-inline").find(".share2-"+post_id).removeClass("hidden").append('<a href="#" class=".show-share">'+e.share_count+'<i class="fa fa-share"></i></a>')):(sharepost_btn.find(".share").parent().removeClass("hidden"),sharepost_btn.find(".shared").parent().addClass("hidden"),$(".list-inline").find(".share1-"+post_id).parent().addClass("hidden"),$(".share2-"+post_id).empty(),$(".list-inline").find(".share2-"+post_id).removeClass("hidden").append('<a href="#" class=".show-share">'+e.share_count+'<i class="fa fa-share"></i></a>')))})}),$(document).on("click",".page-liked",function(e){e.preventDefault(),pagelike_btn=$(this).closest(".page-links"),$.post(SP_source()+"ajax/page-liked",{timeline_id:$(this).data("timeline-id")},function(e){200==e.status&&1==e.like&&(pagelike_btn.find(".pageliked").parent().addClass("hidden"),pagelike_btn.find(".pagelike").parent().removeClass("hidden"),pagelike_btn.find(".pagelike").closest(".holder").slideToggle())})}),$(document).on("click",".group-join",function(e){e.preventDefault(),pagelike_btn=$(this).closest(".page-links"),$.post(SP_source()+"ajax/group-join",{timeline_id:$(this).data("timeline-id")},function(e){200==e.status&&1==e.join&&(pagelike_btn.find(".joined").parent().addClass("hidden"),pagelike_btn.find(".join").parent().removeClass("hidden"),pagelike_btn.find(".join").closest(".holder").slideToggle())})}),$("body").on("click",".delete-comment",function(e){e.preventDefault(),commentdelete_btn=$(this).closest(".delete_comment_list"),$.post(SP_source()+"ajax/comment-delete",{comment_id:$(this).data("commentdelete-id")},function(e){200==e.status&&1==e.deleted&&(commentdelete_btn.find(".delete_comment").closest(".comments").slideToggle(),a("You have successfully deleted the comment","warning"))})}),$("body").on("click",".delete-post",function(e){e.preventDefault(),postPanel=$(this).closest(".panel-post"),$.post(SP_source()+"ajax/post-delete",{post_id:$(this).data("post-id")},function(e){200==e.status&&(postPanel.addClass("fadeOut"),setTimeout(function(){postPanel.remove()},800),a("You have successfully deleted the post","warning"))})}),$(document).on("click",".show-comment-reply",function(e){e.preventDefault(),$(this).parents(".main-comment").find(".comment-reply").slideToggle(100).find(".post-comment").focus()}),$(document).on("click",".remove-member",function(e){e.preventDefault(),input_ids=$(this).data("user-id").split("-"),user_id=input_ids[0],group_id=input_ids[1],commentdelete_btn=$(this).closest(".follow-links"),$.confirm({title:"Confirm!",content:"Do you want to delete member?",confirmButton:"Yes",cancelButton:"No",confirmButtonClass:"btn-primary",cancelButtonClass:"btn-danger",confirm:function(){$.post(SP_source()+"ajax/groupmember-remove",{user_id:user_id,group_id:group_id},function(e){200==e.status&&(1==e.deleted?(commentdelete_btn.find(".remove-member").closest(".holder").slideToggle(),a("You have successfully deleted the member","warning")):0==e.deleted&&a("Assign admin role for member and remove","warning"))})},cancel:function(){}})}),$(document).on("click",".remove-pagemember",function(e){e.preventDefault(),input_ids=$(this).data("user-id").split("-"),user_id=input_ids[0],page_id=input_ids[1],commentdelete_btn=$(this).closest(".follow-links"),$.confirm({title:"Confirm!",content:"Do you want to delete member?",confirmButton:"Yes",cancelButton:"No",confirmButtonClass:"btn-primary",cancelButtonClass:"btn-danger",confirm:function(){$.post(SP_source()+"ajax/pagemember-remove",{user_id:user_id,page_id:page_id},function(e){200==e.status&&(1==e.deleted?(commentdelete_btn.find(".remove-pagemember").closest(".holder").slideToggle(),a("You have successfully deleted the member","warning")):0==e.deleted&&a("Assign admin role for member and remove","warning"))})},cancel:function(){}})}),$(document).on("click",".delete-page",function(e){e.preventDefault(),pagedelete_btn=$(this).closest(".deletepage"),page_id=$(this).data("pagedelete-id"),$.confirm({title:"Confirm!",content:"Do you want to delete page?",confirmButton:"Yes",cancelButton:"No",confirmButtonClass:"btn-primary",cancelButtonClass:"btn-danger",confirm:function(){$.post(SP_source()+"ajax/page-delete",{page_id:page_id},function(e){200==e.status&&1==e.deleted&&pagedelete_btn.find(".delete_page").closest(".deletepage").slideToggle()})},cancel:function(){}})}),$("body").on("click",".notify-user",function(e){e.preventDefault(),notify_btn=$(this).closest(".list-inline"),$.post(SP_source()+"ajax/notify-user",{post_id:$(this).data("post-id")},function(e){200==e.status&&(1==e.notified?(notify_btn.find(".notify").parent().addClass("hidden"),notify_btn.find(".unnotify").parent().removeClass("hidden")):(notify_btn.find(".notify").parent().removeClass("hidden"),notify_btn.find(".unnotify").parent().addClass("hidden")))})}),$("body").on("keypress",".post-comment",function(e){if(13==e.keyCode){e.preventDefault();var t=$(this).closest(".panel-post"),s=$(this).data("comment-id");$(this).val()&&(s&&(t=$(this).closest(".commented")),$.post(SP_source()+"ajax/post-comment",{post_id:$(this).data("post-id"),comment_id:s,description:$(this).val()},function(e){if(200==e.status){if(s){var a=".comment"+s;$(a).hasClass("has-replies")?$(a).find(".comment-replies").show():($(a).append('<li><div class="comment-replies" style=""> <ul class="list-unstyled comment-replys"></ul></div></li>'),$(a).addClass("has-replies")),$(a).find(".comment-replies").find(".comment-replys").prepend(e.data.original),$(a).find(".post-comment").val("")}else $(t).find("div.post-comments-list").prepend(e.data.original),$(t).find(".post-comment").val("");$(t).find(".post-comment").val(""),jQuery("time.timeago").timeago()}}))}}),$(document).on("click",".show-comments",function(e){e.preventDefault();var t=$(this).closest(".panel-footer").next(".comments-section");t.slideToggle(),setTimeout(function(){t.find(".post-comment").focus()},100)}),$(document).on("click",".show-all-comments",function(e){e.preventDefault();var t=$(this).closest(".panel-post");t.find(".comments-section").slideToggle()}),$(document).on("click",".show-comment-replies",function(e){e.preventDefault(),$(this).next().slideToggle()}),$(document).on("click",".change-avatar",function(e){e.preventDefault(),$(".change-avatar-input").trigger("click")}),$(document).on("change",".change-avatar-input",function(e){e.preventDefault(),console.log("changed input"),$("form.change-avatar-form").submit()}),$("form.change-avatar-form").ajaxForm({url:SP_source()+"ajax/change-avatar",beforeSend:function(){$(".user-avatar-progress").html("0%<br>Uploaded").fadeIn("fast").removeClass("hidden")},uploadProgress:function(e,t,s,a){var n=a+"%";console.log(n),$(".user-avatar-progress").html(n+"<br>Uploaded"),100==a&&setTimeout(function(){$(".user-avatar-progress").html("Processing"),console.log("processing"),setTimeout(function(){$(".user-avatar-progress").html("Please wait")},2e3)},500)},success:function(e){200==e.status?$(".timeline-user-avtar").find("img").attr("src",e.avatar_url).load(function(){$(".user-avatar-progress").fadeOut("fast").addClass("hidden").html(""),$(".change-avatar-input").val()}):($(".user-avatar-progress").fadeOut("fast").addClass("hidden").html(""),$(".change-avatar-input").val())}}),$("form.create-album-form").ajaxForm({url:SP_source()+"ajax/create-album",beforeSend:function(){},success:function(e){200==e.status}}),$(document).on("click",".change-cover",function(e){e.preventDefault(),$(".change-cover-input").trigger("click")}),$(document).on("change",".change-cover-input",function(e){e.preventDefault(),$("form.change-cover-form").submit()}),$("#createPost").mention({remote:SP_source()+"ajax/get-users-mentions",limit:10}),e(),emojify.run(),t(),$("form.change-cover-form").ajaxForm({url:SP_source()+"ajax/change-cover",beforeSend:function(){$(".user-cover-progress").html("0%<br>Uploaded").fadeIn("fast").removeClass("hidden")},uploadProgress:function(e,t,s,a){var n=a+"%";$(".user-cover-progress").html(n+"<br>Uploaded"),100==a&&setTimeout(function(){$(".user-cover-progress").html("Processing"),setTimeout(function(){$(".user-cover-progress").html("Please wait")},2e3)},500)},success:function(e){200==e.status?(console.log(e),$(".timeline-cover").find("img").attr("src",e.cover_url).load(function(){$(".user-cover-progress").fadeOut("fast").addClass("hidden").html(""),$(".change-cover-input").val()})):(console.log("dileep2"),$(".user-cover-progress").fadeOut("fast").addClass("hidden").html(""),$(".change-cover-input").val())}}),$(document).on("click","#imageUpload",function(e){e.preventDefault(),$(".post-images-upload").trigger("click")}),$(document).on("click","#albumImageUpload",function(e){e.preventDefault(),$(".album-images-upload").trigger("click")}),$(document).on("change",".post-images-upload",function(e){e.preventDefault();var t=this.files?this.files:[];if($(".post-images-selected").find("span").text(t.length),$(".post-images-selected").show("slow"),t.length&&window.FileReader){var s=$(this)[0].files.length,a=$(this)[0].value,n=a.substring(a.lastIndexOf(".")+1).toLowerCase(),o=$("#post-image-holder");if(o.empty(),"gif"==n||"png"==n||"jpg"==n||"jpeg"==n)if("undefined"!=typeof FileReader)for(var i=0;s>i;i++){var d=new FileReader;d.onload=function(e){$("<img />",{src:e.target.result,"class":"thumb-image"}).appendTo(o)},o.show(),d.readAsDataURL($(this)[0].files[i])}else alert("This browser does not support FileReader.");else alert("Pls select only images")}}),$(document).on("change",".album-images-upload",function(e){e.preventDefault();var t=this.files?this.files:[];if($(".post-images-selcted").find("span").text(t.length),$(".post-images-selcted").show("slow"),t.length&&window.FileReader){var s=$(this)[0].files.length,a=$(this)[0].value,n=a.substring(a.lastIndexOf(".")+1).toLowerCase(),o=$(".albums-list .row");if(o.empty(),"gif"==n||"png"==n||"jpg"==n||"jpeg"==n)if("undefined"!=typeof FileReader)for(var i=0;s>i;i++){var d=new FileReader;d.onload=function(e){o.append('<div class="col-md-4 album-images"><div class="album"><img src="'+e.target.result+'" alt="images"><a class="btn btn-remove"><i class="fa fa-times" aria-hidden="true"></i></a></div></div>')},o.show(),d.readAsDataURL($(this)[0].files[i])}else alert("This browser does not support FileReader.");else alert("Pls select only images")}});var n=$("#navbar-search").data("url");$("#navbar-search").selectize({valueField:"username",labelField:"name",optgroupField:"type",searchField:"name",optgroups:[{value:"user",label:"Users"},{value:"group",label:"Groups"},{value:"page",label:"Pages"}],render:{option:function(e,t){var s="default-male-avatar.png";if("group"==e.type?s="default-group-avatar.png":"page"==e.type&&(s="default-page-avatar.png"),null!=e.avatar_url[0])var a='<a class="media-left" href="'+SP_source()+e.type+"/avatar/"+t(e.avatar_url[0].source)+'"><img src="'+SP_source()+e.type+"/avatar/"+t(e.avatar_url[0].source)+'" alt="..."></a>';else var a='<a class="media-left" href="#"><img src="'+SP_source()+e.type+"/avatar/"+s+'" alt="..."></a>';if(null!=e.about)var n=t(e.about);else var n="(no description added)";return'<div class="media big-search-dropdown">'+a+'<div class="media-body"><h4 class="media-heading">'+t(e.name)+"</h4><p>"+n+"</p></div></div>"},optgroup_header:function(e,t){return'<div class="optgroup-header">'+t(e.label)+"</div>"}},onChange:function(e){window.location.href=SP_source()+e},load:function(e,t){return e.length?void $.ajax({url:n,type:"GET",dataType:"json",data:{search:e},error:function(){t()},success:function(e){t(e.data)}}):t()}});var n=$("#navbar-search").data("url"),o=$("#userTags").selectize({valueField:"id",labelField:"name",searchField:"name",plugins:["remove_button"],render:{option:function(e,t){if(null!=e.about)var s=t(e.about);else var s="(no description added)";return'<div class="media big-search-dropdown"><a class="media-left" href="#"><img src="'+e.avatar+'" alt="..."></a><div class="media-body"><h4 class="media-heading">'+t(e.name)+"</h4><p>"+s+"</p></div></div>"}},onChange:function(e){$('[name="user_tags"]').val(e);var t=o[0].selectize,a=t.items;s()},load:function(e,t){return e.length?void $.ajax({url:base_url+"api/v1/users",type:"GET",dataType:"json",data:{search:e},error:function(){t()},success:function(e){t(e.data)}}):t()}});$(".timeline-posts").jscroll({nextSelector:"a.jscroll-next:last",callback:function(){emojify.run(),e(),t(),jQuery("time.timeago").timeago()}}),$("#add-members-group").on("keyup",function(){$(".group-suggested-users").empty(),null!=$("#add-members-group").val()&&""!=$("#add-members-group").val()&&(groupId=$(this).data("group-id")),$.post(SP_source()+"ajax/get-users",{searchname:$("#add-members-group").val(),group_id:groupId,csrf_token:$('[name="csrf_token"]').attr("content")}).done(function(e){if(200==e.status){var t=e.data;$.each(t,function(e,t){var s=t[0],a="",n="",o="";null!=s.groups[0]?(n=s.groups[0].pivot.user_id,o=s.groups[0].pivot.group_id,"pending"==s.groups[0].pivot.status?a="Join Requested":"approved"==s.groups[0].pivot.status&&(a="Joined")):(n=s.id,o=groupId,a="Join"),null!=s.avatar_id?avatarSource=s.avatar_url[0].source:avatarSource="default-"+s.gender+"-avatar.png",$(".group-suggested-users").append('<div class="holder"><div class="follower pull-left"><a href="'+SP_source()+s.username+'"><img src="'+SP_source()+"user/avatar/"+avatarSource+'" alt="images"></a><a href="'+SP_source()+s.username+'"><span>'+s.name+'</span></a></div><div class="follow-links pull-right"><div class="left-col"><a href="#" class="btn btn-to-follow btn-default add-member  add" data-user-id="'+n+" - "+o+"-"+a+'">'+a+'</a></div></div><div class="clearfix"></div></div>')})}})}),$("#add-members-page").on("keyup",function(){$(".page-suggested-users").empty(),null!=$("#add-members-page").val()&&""!=$("#add-members-page").val()&&(pageId=$(this).data("page-id")),$.post(SP_source()+"ajax/get-members-join",{searchname:$("#add-members-page").val(),page_id:pageId,csrf_token:$('[name="csrf_token"]').attr("content")}).done(function(e){if(200==e.status){var t=e.data;$.each(t,function(e,t){var s=t[0],a="",n="",o="";null!=s.pages[0]?(n=s.pages[0].pivot.user_id,o=s.pages[0].pivot.page_id,a="Joined"):(n=s.id,o=pageId,a="Join"),null!=s.avatar_id?avatarSource=s.avatar_url[0].source:avatarSource="default-"+s.gender+"-avatar.png",$(".page-suggested-users").append('<div class="holder"><div class="follower pull-left"><a href="'+SP_source()+s.username+'"><img src="'+SP_source()+"user/avatar/"+avatarSource+'" alt="images"></a><a href="'+SP_source()+s.username+'"><span>'+s.name+'</span></a></div><div class="follow-links pull-right"><div class="left-col"><a href="#" class="btn btn-to-follow btn-default add-page-member  add" data-user-id="'+n+" - "+o+"-"+a+'">'+a+'</a></div></div><div class="clearfix"></div></div>')})}})}),$(".postmessage").on("keypress",function(e){13==e.keyCode&&(e.preventDefault(),$.post(SP_source()+"ajax/post-message",{conversation_id:$(".conversation-id").val(),description:$(this).val()},function(e){$(".post-message").val(""),$(".coversations-thread").append(e.data),jQuery("time.timeago").timeago(),emojify.run()}))}),$(".chat-list-toggle").on("click",function(e){e.preventDefault(),$(".chat-list").animate({width:"toggle"}),$(".chat-box").slideToggle()}),$(".btn-status").on("click",function(e){e.preventDefault(),$(window).width()<1200&&$(".timeline-list .list-inline").slideToggle("slow")}),$(window).on("resize",function(){var e=$(this);e.width()>=1200&&$(".timeline-list .list-inline").show("slow")}),$(".smooth-scroll").mCustomScrollbar("scrollTo","bottom",{autoHideScrollbar:!0,theme:"rounded",mouseWheel:{preventDefault:!0}}),$('[data-toggle="tooltip"]').tooltip(),$("#datepicker").datepicker(),$("#datepicker1").datepicker(),$("#datepicker2").datepicker(),$(".input-group-addon").on("click",function(){$(this).parents(".input-group").find(".form-control").trigger("select")}),$(".input-group .form-control").on("focus",function(){$(this).parents(".input-group").addClass("input-group-focus")}),$(".input-group .form-control").on("blur",function(){$(this).parents(".input-group").removeClass("input-group-focus")}),$(".settings_switch").change(function(){alert("vj")})});