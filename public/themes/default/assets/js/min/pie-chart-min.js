$(function(){$(".round-shape").drawPieChart([{title:"Cash",value:40,color:"#2C3E50"},{title:"Fixed Interest",value:8,color:"#fe4400"},{title:"Property",value:24,color:"#018ab6"},{title:"Australian shares",value:16,color:"#fff100"},{title:"Intl. shares",value:12,color:"#D7DADB"}])}),function($,t){$.fn.drawPieChart=function(t,e){function i(e){var i=$(this).data().order;F.text(t[i].title+": "+t[i].value).fadeIn(200),"active"!==O[i][0].getAttribute("data-active")&&k[i].animate({opacity:.8},180),b.onPieMouseenter.apply($(this),[e,t])}function a(e){var i=$(this).data().order;F.hide(),"active"!==O[i][0].getAttribute("data-active")&&k[i].animate({opacity:b.lightPiesOpacity},100),b.onPieMouseleave.apply($(this),[e,t])}function n(t){F.css({top:t.pageY+b.tipOffsetY,left:t.pageX-F.width()/2+b.tipOffsetX})}function o(e){for(var i=$(this).data().order,a=O[i][0],n=0,o=t.length;o>n;n++)n!==i&&(O[n][0].setAttribute("data-active",""),k[n].css({opacity:b.lightPiesOpacity}));"active"===a.getAttribute("data-active")?(a.setAttribute("data-active",""),k[i].css({opacity:.8})):(a.setAttribute("data-active","active"),k[i].css({opacity:1})),b.onPieClick.apply($(this),[e,t])}function s(e){var i=-v/2,a=1;b.animation&&(a=e),D[0].setAttribute("opacity",e);for(var n=0,o=t.length;o>n;n++){var s=a*(t[n].value/M*(2*v)),r=i+s,l=(r-i)%(2*v)>v?1:0,u=g+d(i)*x,c=m+w(i)*x,f=g+d(r)*x,p=m+w(r)*x,h=g+d(i)*(x+b.lightPiesOffset),A=m+w(i)*(x+b.lightPiesOffset),P=g+d(r)*(x+b.lightPiesOffset),y=m+w(r)*(x+b.lightPiesOffset),O=["M",u,c,"A",x,x,0,l,1,f,p,"L",g,m,"Z"],C=["M",h,A,"A",x+b.lightPiesOffset,x+b.lightPiesOffset,0,l,1,P,y,"L",g,m,"Z"];S[n][0].setAttribute("d",O.join(" ")),k[n][0].setAttribute("d",C.join(" ")),i+=s}}function r(){b.animation?P(l):s(1)}function l(){Y+=X,s(C(Y)),1>Y?P(arguments.callee):b.afterDrawed.call(f)}function u(t){return Math.max.apply(null,t)}function c(t){return Math.min.apply(null,t)}var f=this,p=f.width(),h=f.height(),g=p/2,m=h/2,d=Math.cos,w=Math.sin,v=Math.PI,b=$.extend({segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:1,baseColor:"#fff",baseOffset:15,edgeOffset:30,pieSegmentGroupClass:"pieSegmentGroup",pieSegmentClass:"pieSegment",lightPiesOffset:12,lightPiesOpacity:.3,lightPieClass:"lightPie",animation:!0,animationSteps:90,animationEasing:"easeInOutExpo",tipOffsetX:-15,tipOffsetY:-45,tipClass:"pieTip",beforeDraw:function(){},afterDrawed:function(){},onPieMouseenter:function(t,e){},onPieMouseleave:function(t,e){},onPieClick:function(t,e){}},e),A={linear:function(t){return t},easeInOutExpo:function(t){var e=.5>t?8*t*t*t*t:1-8*--t*t*t*t;return e>1?1:e}},P=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}(),y=$('<svg width="'+p+'" height="'+h+'" viewBox="0 0 '+p+" "+h+'" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"></svg>').appendTo(f),O=[],S=[],k=[],C=A[b.animationEasing],x=c([h/2,p/2])-b.edgeOffset,M=0,E=function(){var t=document.createElementNS("http://www.w3.org/2000/svg","circle"),e=$(t).appendTo(y);t.setAttribute("cx",g),t.setAttribute("cy",m),t.setAttribute("r",x+b.baseOffset),t.setAttribute("fill",b.baseColor)}(),T=document.createElementNS("http://www.w3.org/2000/svg","g"),D=$(T).appendTo(y);D[0].setAttribute("opacity",0);for(var F=$('<div class="'+b.tipClass+'" />').appendTo("body").hide(),I=F.width(),q=F.height(),N=0,R=t.length;R>N;N++){M+=t[N].value;var j=document.createElementNS("http://www.w3.org/2000/svg","g");j.setAttribute("data-order",N),j.setAttribute("class",b.pieSegmentGroupClass),O[N]=$(j).appendTo(D),O[N].on("mouseenter",i).on("mouseleave",a).on("mousemove",n).on("click",o);var G=document.createElementNS("http://www.w3.org/2000/svg","path");G.setAttribute("stroke-width",b.segmentStrokeWidth),G.setAttribute("stroke",b.segmentStrokeColor),G.setAttribute("stroke-miterlimit",2),G.setAttribute("fill",t[N].color),G.setAttribute("class",b.pieSegmentClass),S[N]=$(G).appendTo(O[N]);var W=document.createElementNS("http://www.w3.org/2000/svg","path");W.setAttribute("stroke-width",b.segmentStrokeWidth),W.setAttribute("stroke",b.segmentStrokeColor),W.setAttribute("stroke-miterlimit",2),W.setAttribute("fill",t[N].color),W.setAttribute("opacity",b.lightPiesOpacity),W.setAttribute("class",b.lightPieClass),k[N]=$(W).appendTo(O[N])}b.beforeDraw.call(f),r();var X=b.animation?1/b.animationSteps:1,Y=b.animation?0:1;return f}}(jQuery);